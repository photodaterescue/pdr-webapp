<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- SEO + OPEN GRAPH -->
    <title>Photo Date Rescue ‚Äî Fix Broken Photo Timestamps</title>
    <meta name="description" content="Restore original photo dates in minutes. Perfect for Google Photos downloads & Apple Photos exports. 100% private.">

    <meta property="og:title" content="Photo Date Rescue ‚Äî Fix Broken Photo Timestamps">
    <meta property="og:description" content="Fix broken photo dates from Google Photos and Apple Photos exports. Clean, accurate timeline restoration.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/static/preview.jpg">

    <!-- Brand theme color -->
    <meta name="theme-color" content="#8c7bff">

    <!-- Premium lavender styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body>

<!-- ========================= -->
<!-- Site Header               -->
<!-- ========================= -->
<header class="site-header">
    <div class="nav-inner">
        <a href="https://photodaterescue.com" class="brand">
            <img
                src="/static/pdr-logo_transparent.png"
                alt="Photo Date Rescue logo"
                class="brand-mark"
            />
            <span class="brand-wordmark">Photo Date Rescue</span>
        </a>

        <nav class="primary-nav">
            <a href="https://photodaterescue.com/#how-it-works">How it works</a>
            <a href="https://photodaterescue.com/#pricing">Pricing</a>
            <a href="https://photodaterescue.com/#guides">Guides</a>
            <a href="https://photodaterescue.com/#faq">FAQ</a>
            <a href="https://photodaterescue.com/#partners">Affiliates</a>
            <a href="https://photodaterescue.com/#support">Support</a>
        </nav>

        <div class="nav-cta">
            <a class="btn btn-outline" href="https://photodaterescue.com/#pricing">Get desktop app</a>
        </div>
    </div>
</header>

<!-- ========================= -->
<!-- Main Webapp Content       -->
<!-- ========================= -->
<main class="webapp-content">

    <!-- Hero Section -->
    <div class="hero-section" style="text-align: center; margin-bottom: 32px;">
        <h1 class="app-title" style="font-size: 2.4rem; font-weight: 800; margin-bottom: 8px;">Fix broken photo dates</h1>
        <p class="hero-static-label">
            Fix wrong photo dates from any device, app, or cloud ‚Äî instantly.
        </p>

        <div class="hero-rotator">
            <p id="hero-phrase" class="hero-phrase"></p>
            <div class="hero-controls">
                <div id="hero-dots" class="hero-dots"></div>
            </div>
        </div>

        <p class="privacy-banner">
            üîí 100% Private ‚Äî web preview is temporary, desktop runs entirely on your own computer.
        </p>
    </div>



        <!-- ========================= -->
        <!-- Why Your Dates Matter     -->
        <!-- ========================= -->

        <section class="card info-card why-card">
            <h2 class="why-title">Why Your Photo Dates Must Be Correct</h2>
            <p class="why-lead">
                Messy or missing dates ruin albums, timelines, search and memories ‚Äî restoring them instantly makes your entire photo library make sense again.
            </p>

            <div class="why-grid">
                <div class="why-col">
                    <h3 class="why-subheading">‚ú® Why It Matters to You</h3>
                    <ul class="why-list">
                        <li>Make your albums look perfect again.</li>
                        <li>Find important memories instantly again.</li>
                        <li>Rebuild your life story in the right order.</li>
                        <li>Make printed gifts and photobooks without stress.</li>
                        <li>Fix old scanned childhood photos.</li>
                        <li>Organize loved ones‚Äô archives after they pass.</li>
                        <li>Stop losing favorite photos in the chaos.</li>
                        <li>Make your gallery feel calm, not overwhelming.</li>
                    </ul>
                </div>

                <div class="why-col">
                    <h3 class="why-subheading">üõ† Why It Happens (and How We Fix It)</h3>
                    <ul class="why-list">
                        <li>Your cloud library stays untouched ‚Äî fixes on copies only.</li>
                        <li>Photos display correctly in Google Photos &amp; iCloud.</li>
                        <li>EXIF ‚ÄúDate Taken / Original‚Äù is fully restored.</li>
                        <li>Removes ‚Äútoday‚Äôs date‚Äù errors from exports.</li>
                        <li>Fixes WhatsApp, Messenger &amp; social downloads.</li>
                        <li>Powers accurate AI Memories &amp; People grouping.</li>
                        <li>Works across iPhone / Android / Mac / Windows.</li>
                        <li>Prevents duplicates and broken timelines caused by bad dates.</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <!-- ========================= -->
        <!-- 2. Upload Card            -->
        <!-- ========================= -->
        <section id="upload-section" class="card upload-card">
            <div id="dropZone" class="dropzone hover-lift">
                <div class="dropzone-inner">
                    <div class="dropzone-icon">‚¨ÜÔ∏è</div>
                    <h3 class="dropzone-title">Drop your ZIP file here</h3>
                    <p class="dropzone-subtitle">or click to browse</p>
                    <p class="dropzone-meta">Maximum file size: 2GB</p>
                </div>
                <input type="file" id="fileInput" accept=".zip" hidden />
            </div>

            <div style="text-align:center; margin-top:18px;">
                <button id="browseBtn" class="btn-primary">Choose ZIP File</button>
            </div>

            <div id="fileInfo" class="fade-in" style="display:none; margin-top:22px;">
                <p><strong>Selected:</strong> <span id="fileName"></span></p>
                <p><strong>Size:</strong> <span id="fileSize"></span></p>
                <button id="uploadBtn" class="submit-btn">Start Processing</button>
            </div>

            <!-- Advanced Settings -->
            <div class="advanced-wrapper" style="text-align:center;">
                <button id="advancedToggle" class="advanced-toggle">
                    <span class="gear-icon">‚öôÔ∏è</span> Advanced settings
                </button>
            </div>

            <div id="advancedSettings" class="advanced-panel">
                <div class="checkbox-row">
                    <input type="checkbox" id="useMtimeFallback" checked>
                    <label for="useMtimeFallback">
                        Allow fallback to Last Modified timestamp when no date is found
                    </label>
                </div>
                <div class="checkbox-row">
                    <input type="checkbox" id="removeDuplicates" checked>
                    <label for="removeDuplicates">
                        Remove exact duplicate files (keep best version only)
                    </label>
                </div>
                <div class="checkbox-row">
                    <input type="checkbox" id="skipNoMetadata">
                    <label for="skipNoMetadata">
                        Remove files with no valid date (exclude from ZIP)
                    </label>
                </div>
            </div>

        </section>

        <!-- ========================= -->
        <!-- 3. Processing Section     -->
        <!-- ========================= -->
        <section id="processing-section" class="card" style="display:none;">
            <h2>Processing Your Photos</h2>

            <!-- Progress bar -->
            <div style="margin-top:20px;">
                <div style="width:100%; background:#e4e1ff; border-radius:999px; height:10px; overflow:hidden;">
                    <div id="progressBar"
                         style="width:0%; height:10px; background:#8c7bff; border-radius:999px; transition:width 0.3s ease;"></div>
                </div>
                <div style="display:flex; justify-content:space-between; margin-top:8px; font-size:0.85rem; color:#514f6c;">
                    <span id="statusText">Uploading...</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>

            <!-- Step indicators -->
            <div style="margin-top:24px; font-size:0.9rem; color:#3f3f59;">
                <div style="display:flex; align-items:center; gap:10px; margin-bottom:8px;">
                    <span id="step1"
                          style="width:28px; height:28px; border-radius:50%; border:2px solid #d3d3ea; display:flex; align-items:center; justify-content:center; font-weight:600;">
                        1
                    </span>
                    <span>Extracting ZIP file</span>
                </div>
                <div style="display:flex; align-items:center; gap:10px; margin-bottom:8px;">
                    <span id="step2"
                          style="width:28px; height:28px; border-radius:50%; border:2px solid #d3d3ea; display:flex; align-items:center; justify-content:center; font-weight:600;">
                        2
                    </span>
                    <span>Detecting export type (Google / Apple)</span>
                </div>
                <div style="display:flex; align-items:center; gap:10px; margin-bottom:8px;">
                    <span id="step3"
                          style="width:28px; height:28px; border-radius:50%; border:2px solid #d3d3ea; display:flex; align-items:center; justify-content:center; font-weight:600;">
                        3
                    </span>
                    <span>Fixing metadata and timestamps</span>
                </div>
                <div style="display:flex; align-items:center; gap:10px; margin-bottom:8px;">
                    <span id="step4"
                          style="width:28px; height:28px; border-radius:50%; border:2px solid #d3d3ea; display:flex; align-items:center; justify-content:center; font-weight:600;">
                        4
                    </span>
                    <span>Organizing by year</span>
                </div>
                <div style="display:flex; align-items:center; gap:10px;">
                    <span id="step5"
                          style="width:28px; height:28px; border-radius:50%; border:2px solid #d3d3ea; display:flex; align-items:center; justify-content:center; font-weight:600;">
                        5
                    </span>
                    <span>Creating fixed ZIP file</span>
                </div>
            </div>
        </section>

        <!-- ========================= -->
        <!-- 4. Summary Section        -->
        <!-- ========================= -->
        <section id="summary-section" class="card" style="display:none;">
            <h2>Processing Complete!</h2>
            <p>Your photos have been fixed and organized.</p>

            <div class="info-card" style="margin-top:18px;">
                <h2>Summary</h2>
                <p><strong>Export Type:</strong> <span id="exportType"></span></p>
                <p><strong>Total Photos:</strong> <span id="totalFiles"></span></p>
                <p><strong>Fixed (EXIF/XMP):</strong> <span id="fixedFiles"></span></p>
                <p><strong>Restored (filename patterns):</strong> <span id="restoredFiles"></span></p>
                <p><strong>Renamed only (no metadata):</strong> <span id="renamedFiles"></span></p>
                <p><strong>Removed (no valid date):</strong> <span id="skippedFiles"></span></p>
                <p><strong>Duplicates removed:</strong> <span id="duplicatesRemoved"></span></p>
            </div>

            <!-- Duplicate summary (Option 1 UI) -->
<div id="duplicateSummaryContainer" class="info-card duplicate-summary-card" style="display:none; margin-top:18px;">
    <div class="duplicate-summary-header">
        <div>
            <h3 class="duplicate-summary-title">Exact duplicates removed</h3>
            <p class="duplicate-summary-count">
                <span id="duplicateCountLabel">0</span> file(s) removed as exact duplicates.
            </p>
            <p class="duplicate-zip-note">
                Full duplicate report included in your ZIP download
                (<code>duplicates_report.txt</code>).
            </p>
        </div>
    </div>
</div>


            <!-- Primary button -->
            <button id="downloadBtn"
                    class="btn-primary w-full">
                Download Fixed Photos
            </button>

            <!-- Secondary button -->
            <button id="resetBtn"
                    class="btn-secondary w-full mt-3">
                Process Another ZIP
            </button>

            <p style="margin-top:10px; font-size:0.8rem; text-align:center; color:#3b3954;">
                Files from the web preview are processed temporarily and deleted automatically after your download completes.
            </p>
        </section>

        <!-- ========================= -->
        <!-- 5. Error Section          -->
        <!-- ========================= -->
        <section id="error-section" class="card" style="display:none; background:#ffecec; border:1px solid #ffbfbf;">
            <h2 style="color:#b40000;">Error</h2>
            <p id="errorMessage" style="color:#8c0000; margin-top:8px;"></p>
            <button id="errorResetBtn"
                    class="btn-primary"
                    style="width:100%; margin-top:18px; background:#d43131;">
                Try Again
            </button>
        </section>


        
<!-- ========================= -->
<!-- Pricing Section           -->
<!-- ========================= -->

<section id="pricing" class="pricing-section">

    <h2 class="pricing-title">PDR Pricing</h2>

    <div class="pricing-grid">

        <!-- Free -->
        <div class="pricing-card pricing-free">
            <h3 class="plan-title">Free</h3>
            <p class="plan-price">$0</p>
            <p class="plan-interval">Web preview only</p>

            <ul class="pricing-features">
                <li>Fix ZIPs up to 100MB in-browser</li>
                <li>Instant preview of corrected dates</li>
                <li>Works with Google Takeout / iCloud / WhatsApp exports</li>
                <li>No install required</li>
                <li>Safe ‚Äî processed temporarily then deleted</li>
            </ul>

            <div class="pricing-btn-wrapper">
                <button class="pricing-btn pricing-btn-free">Free Web Demo</button>
            </div>
        </div>

        <!-- Monthly -->
        <div class="pricing-card pricing-monthly">
            <h3 class="plan-title">Monthly</h3>
            <p class="plan-price">$16.99</p>

            <ul class="pricing-features">
                <li>Full desktop access</li>
                <li>Fix unlimited ZIPs and folders</li>
                <li>Restore EXIF ‚ÄúDate Taken‚Äù + XMP timestamps</li>
                <li>Repair WhatsApp / Messenger / social downloads</li>
                <li>Correct Google Takeout & Apple Photos exports</li>
                <li>Fix HEIC / JPG / PNG / MP4 timestamp issues</li>
                <li>Smart renaming for clean timelines</li>
                <li>Safe processing ‚Äî originals untouched</li>
                <li><strong>Use on up to 3 devices</strong></li>
            </ul>

            <div class="pricing-btn-wrapper">
                <a href="https://pay.photodaterescue.com/buy/ea41d61a-40b5-4be1-9130-2a0c3ee94ebb?embed=1"
                   class="lemonsqueezy-button pricing-btn pricing-btn-monthly">
                   Buy now
                </a>
                <script src="https://assets.lemonsqueezy.com/lemon.js" defer></script>
            </div>
        </div>

        <!-- Yearly -->
        <div class="pricing-card pricing-yearly">
            <div class="best-value-badge">Best value</div>

            <h3 class="plan-title">Yearly</h3>
            <p class="plan-price">$99</p>

            <ul class="pricing-features">
                <li>Everything in Monthly</li>
                <li>Ideal for ongoing, long-term photo care</li>
                <li>Receive new features as they‚Äôre released</li>
                <li>Supports large folders (1GB‚Äì500GB+)</li>
                <li>Best for large or growing collections</li>
                <li><strong>Use on up to 3 devices</strong></li>
            </ul>

            <div class="pricing-btn-wrapper">
                <a href="https://pay.photodaterescue.com/buy/c6ede893-fa25-4d63-95cf-17d099dfe3f0?embed=1"
                   class="lemonsqueezy-button pricing-btn pricing-btn-yearly">
                   Buy now
                </a>
                <script src="https://assets.lemonsqueezy.com/lemon.js" defer></script>
            </div>
        </div>

    </div> <!-- ‚úÖ FIX: this was missing and broke your layout -->

    <!-- Lifetime -->
    <div class="pricing-grid-lifetime">
        <div class="pricing-card pricing-lifetime">

            <div class="plan-title">Lifetime</div>

            <div class="plan-price">$199</div>
            <div class="plan-interval">one-time</div>

            <ul class="pricing-features">
                <li>Everything in Yearly</li>
                <li>Permanent access for lifetime of the product</li>
                <li>No subscriptions ‚Äî one payment</li>
                <li>Best long-term savings for loyal users</li>
                <li><strong>Use on up to 10 devices</strong></li>
            </ul>

            <button class="pricing-btn pricing-btn-locked">
                Unlock after first billing cycle
            </button>

            <div class="lifetime-note">
                Available only after one successful Monthly or Yearly payment.
            </div>

        </div>
    </div>

    <p class="pricing-footer-note">
        Some people fix a single ZIP, export, or Takeout ‚Äî and never need the tool again.
        Others fix new batches every year as phones, clouds, and apps evolve.
        Subscriptions keep the app sustainable and continuously updated, while Lifetime rewards loyal users fairly.
    </p>

</section>


        <!-- ========================= -->
        <!-- Comparison Section        -->
        <!-- ========================= -->

        <section id="comparison" class="comparison-section">

            <div class="comparison-card">

                <h2 class="comparison-title">How Photo Date Rescue compares</h2>
                <p class="comparison-subtitle">
                    Percentages show how well each tool fits this job ‚Äî fixing huge, messy photo libraries
                    and putting everything back into true chronological order.
                </p>

                <!-- TABLE -->
                <div class="comparison-table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Use case</th>
                                <th class="is-pdr">Photo Date Rescue</th>
                                <th>ExifTool</th>
                                <th>DigiKam</th>
                                <th>Lightroom</th>
                                <th>PhotoMove</th>
                            </tr>
                        </thead>

                        <tbody>

                            <!-- 1 -->
                            <tr>
                                <td class="feature-label">
                                    Google Photos ZIPs & Apple Exports
                                    <span class="feature-hint">(JSON, HEIC, JPG / MP4 mixes)</span>
                                </td>
                                <td class="is-pdr"><div class="score"><span class="score-value">98%</span><div class="score-bar"><span style="width:98%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">60%</span><div class="score-bar"><span style="width:60%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">40%</span><div class="score-bar"><span style="width:40%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">20%</span><div class="score-bar"><span style="width:20%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">65%</span><div class="score-bar"><span style="width:65%"></span></div></div></td>
                            </tr>

                            <!-- 2 -->
                            <tr>
                                <td class="feature-label">
                                    Social Media Libraries
                                    <span class="feature-hint">(WhatsApp, Messenger, Instagram, Snapchat)</span>
                                </td>
                                <td class="is-pdr"><div class="score"><span class="score-value">95%</span><div class="score-bar"><span style="width:95%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">55%</span><div class="score-bar"><span style="width:55%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">60%</span><div class="score-bar"><span style="width:60%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">30%</span><div class="score-bar"><span style="width:30%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">50%</span><div class="score-bar"><span style="width:50%"></span></div></div></td>
                            </tr>

                            <!-- 3 -->
                            <tr>
                                <td class="feature-label">
                                    Ease of use for non-technical people
                                    <span class="feature-hint">(no configs, no commands, no stress)</span>
                                </td>
                                <td class="is-pdr"><div class="score"><span class="score-value">97%</span><div class="score-bar"><span style="width:97%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">10%</span><div class="score-bar"><span style="width:10%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">45%</span><div class="score-bar"><span style="width:45%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">60%</span><div class="score-bar"><span style="width:60%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">60%</span><div class="score-bar"><span style="width:60%"></span></div></div></td>
                            </tr>

                            <!-- 4 -->
                            <tr>
                                <td class="feature-label">
                                    Speed: 50,000 photos & videos
                                    <span class="feature-hint">(renaming + EXIF fixing for chronological ordering)</span>
                                </td>
                                <td class="is-pdr"><div class="score"><span class="score-value">95%</span><div class="score-bar"><span style="width:95%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">70%</span><div class="score-bar"><span style="width:70%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">70%</span><div class="score-bar"><span style="width:70%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">45%</span><div class="score-bar"><span style="width:45%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">60%</span><div class="score-bar"><span style="width:60%"></span></div></div></td>
                            </tr>

                            <!-- 5 -->
                            <tr>
                                <td class="feature-label">
                                    Duplicate removal
                                    <span class="feature-hint">(confirmed duplicates only)</span>
                                </td>
                                <td class="is-pdr"><div class="score"><span class="score-value">95%</span><div class="score-bar"><span style="width:90%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">30%</span><div class="score-bar"><span style="width:30%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">40%</span><div class="score-bar"><span style="width:40%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">20%</span><div class="score-bar"><span style="width:20%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">60%</span><div class="score-bar"><span style="width:60%"></span></div></div></td>
                            </tr>

                            <!-- 6 -->
                            <tr>
                                <td class="feature-label">
                                    Advanced EXIF / metadata editing power
                                    <span class="feature-hint">(GPS, lens, copyright, custom fields)</span>
                                </td>
                                <td class="is-pdr"><div class="score"><span class="score-value">40%</span><div class="score-bar"><span style="width:40%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">100%</span><div class="score-bar"><span style="width:100%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">85%</span><div class="score-bar"><span style="width:85%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">80%</span><div class="score-bar"><span style="width:80%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">20%</span><div class="score-bar"><span style="width:20%"></span></div></div></td>
                            </tr>

                            <!-- 7 -->
                            <tr>
                                <td class="feature-label">
                                    Pro photographer / RAW workflow
                                    <span class="feature-hint">(ratings, tags, editing, colour work)</span>
                                </td>
                                <td class="is-pdr"><div class="score"><span class="score-value">30%</span><div class="score-bar"><span style="width:30%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">70%</span><div class="score-bar"><span style="width:70%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">95%</span><div class="score-bar"><span style="width:95%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">100%</span><div class="score-bar"><span style="width:100%"></span></div></div></td>
                                <td><div class="score"><span class="score-value">25%</span><div class="score-bar"><span style="width:25%"></span></div></div></td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <!-- ANALYSIS BLOCK -->
                <div class="comparison-analysis">
                    <h3>Why PDR is usually the best choice for real-world libraries</h3>

                    <p>
                        PDR is built for chaotic, mixed libraries ‚Äî Google Photos ZIPs, Apple exports and years of WhatsApp / Messenger / social dumps ‚Äî where the goal is simply <strong>‚Äúmake everything appear in the right order again‚Äù</strong> with as little effort as possible.
                    </p>

                    <ul>
                        <li><strong>Mass-scale automation:</strong> tens of thousands of photos and videos can be renamed and date-fixed in a single run.</li>
                        <li><strong>Chronological accuracy:</strong> logic focuses entirely on story-order ‚Äî EXIF, JSON, filenames and fallbacks work together automatically.</li>
                        <li><strong>Zero-decision workflow:</strong> drag in a ZIP, get clean chronological output ‚Äî no settings, no prompts.</li>
                        <li><strong>Safe duplicate handling:</strong> only confirmed identical duplicates are removed.</li>
                        <li><strong>Fits pro workflows:</strong> the cleaned library drops straight into Lightroom, DigiKam or ExifTool for editing/tagging.</li>
                    </ul>

                    <p class="analysis-conclusion">
                        <strong>In short:</strong> PDR is the fastest, least-effort way to restore huge mixed photo libraries into true chronological order ‚Äî while still fitting perfectly into expert workflows.
                    </p>
                </div>

            </div>

        </section>





        
        <!-- ========================= -->
        <!-- 6. How it Works Card      -->
        <!-- ========================= -->
        <section class="card info-card">
            <h2>How It Works</h2>
            <ol class="how-list">
                <li>Upload your Google Photos or Apple Photos ZIP export.</li>
                <li>We detect the export type + scan EXIF/XMP/JSON.</li>
                <li>We restore all timestamps following the naming spec (including WhatsApp <code>_WA</code> files).</li>
                <li>Photos are organized into year folders with clean, machine-readable filenames.</li>
                <li>Download your corrected ZIP.</li>
            </ol>
        </section>

        <!-- ========================= -->
        <!-- 7. Privacy Guarantee Card -->
        <!-- ========================= -->
        <section class="card info-card privacy-card">
            <h2>Privacy Guarantee</h2>
            <p><strong>Web preview:</strong> files are processed only in temporary storage, never retained, and are deleted automatically immediately after your download completes.</p>
            <p><strong>Desktop app:</strong> everything runs locally on your own computer ‚Äî your photos never leave your device.</p>
        </section>


        <!-- ========================= -->
        <!-- 8. FAQ Card               -->
        <!-- ========================= -->
        <section class="card faq-card">
            <h2>Frequently Asked Questions</h2>

            <p>
                <strong>Why are my photo dates wrong?</strong><br>
                Google Photos and Apple Photos sometimes remove or alter EXIF timestamps during export,
                especially with ‚ÄúUnmodified Originals‚Äù.
            </p>

            <p>
                <strong>Does this work with WhatsApp or social media photos?</strong><br>
                Yes ‚Äî as long as they‚Äôre inside your ZIP. WhatsApp filenames are detected and normalized to
                <code>YYYY-MM-DD_12-00-00_WA.ext</code>.
            </p>

            <p>
                <strong>Is my data safe?</strong><br>
                100% ‚Äî the web preview uses temporary processing only, and the desktop app keeps everything on your own device.
            </p>

            <p>
                <strong>What devices does this support?</strong><br>
                Any ZIP exported from Google Photos or Apple Photos. Works on Windows, Mac, Linux and modern mobile browsers.
            </p>
        </section>

    </main>
</div>

<!-- ========================= -->
<!-- Duplicate full-list modal -->
<!-- ========================= -->
<div id="duplicateModal" class="modal" aria-hidden="true">
    <div id="duplicateModalBackdrop" class="modal-backdrop"></div>
    <div class="modal-dialog">
        <div class="modal-header">
            <h3>Duplicate files removed</h3>
            <button id="closeDuplicateModal" class="modal-close" aria-label="Close duplicate list">&times;</button>
        </div>
        <pre id="duplicateModalList" class="duplicate-modal-list">
No duplicates were removed from this ZIP.
        </pre>
    </div>
</div>

<!-- ========================= -->
<!-- 9. JavaScript Logic       -->
<!-- ========================= -->
    
    <script>
        
    // =======================
    // ELEMENT REFERENCES
    // =======================
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const browseBtn = document.getElementById('browseBtn');
    const fileInfo = document.getElementById('fileInfo');
    const uploadBtn = document.getElementById('uploadBtn');

    const uploadSection = document.getElementById('upload-section');
    const processingSection = document.getElementById('processing-section');
    const summarySection = document.getElementById('summary-section');
    const errorSection = document.getElementById('error-section');

    const resetBtn = document.getElementById('resetBtn');
    const errorResetBtn = document.getElementById('errorResetBtn');

    const advancedToggle = document.getElementById('advancedToggle');
    const advancedSettings = document.getElementById('advancedSettings');

    const useMtimeFallback = document.getElementById('useMtimeFallback');
    const skipNoMetadata = document.getElementById('skipNoMetadata');
    const removeDuplicates = document.getElementById('removeDuplicates');

    // Duplicate summary UI (simplified)
    const duplicateSummaryContainer = document.getElementById('duplicateSummaryContainer');
    const duplicateCountLabel = document.getElementById('duplicateCountLabel');
    const duplicateNote = document.getElementById('duplicateNote');
    const duplicateListEl = document.getElementById('duplicateList');

    let selectedFile = null;
    let downloadBlob = null;


    // =======================
    // SECTION CONTROL
    // =======================
    function showSection(section) {
        uploadSection.style.display = section === 'upload' ? 'block' : 'none';
        processingSection.style.display = section === 'processing' ? 'block' : 'none';
        summarySection.style.display = section === 'summary' ? 'block' : 'none';
        errorSection.style.display = section === 'error' ? 'block' : 'none';
    }
    showSection('upload');


    // =======================
    // ADVANCED SETTINGS TOGGLE
    // =======================
    advancedToggle.addEventListener('click', () => {
        advancedSettings.classList.toggle('advanced-panel-open');
    });


    // =======================
    // FILE INPUT
    // =======================
    browseBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        fileInput.click();
    });

    dropZone.addEventListener('click', () => fileInput.click());

    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.classList.add('dropzone-hover');
    });

    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('dropzone-hover');
    });

    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('dropzone-hover');

        if (e.dataTransfer.files.length > 0) {
            const file = e.dataTransfer.files[0];

            if (!file.name.toLowerCase().endsWith('.zip')) {
                alert("Please upload a .zip file.");
                return;
            }

            if (!checkZipLimit(file)) return;
            handleFileSelect(file);
        }
    });

    fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
            const file = e.target.files[0];
            if (!checkZipLimit(file)) return;
            handleFileSelect(file);
        }
    });

    function handleFileSelect(file) {
        selectedFile = file;
        document.getElementById('fileName').textContent = file.name;
        document.getElementById('fileSize').textContent = formatFileSize(file.size);
        fileInfo.style.display = 'block';
    }

    function formatFileSize(bytes) {
        if (bytes < 1024) return bytes + ' B';
        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB';
        if (bytes < 1024 * 1024 * 1024) return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
        return (bytes / (1024 * 1024 * 1024)).toFixed(2) + ' GB';
    }


    // =======================
    // UPLOAD 100MB ZIP LIMIT (front-end)
    // =======================
        function checkZipLimit(file) {
            const MAX_MB = 100;
            if (file.size > MAX_MB * 1024 * 1024) {
                showError("‚ùå This free web version supports ZIP files up to 100MB.<br>Your file is too large.");
                return false;
            }
            return true;
        }



    // =======================
    // UPLOAD + PROCESS
    // =======================
    uploadBtn.addEventListener('click', () => {
        if (!selectedFile) return;

        // Align with 100MB front-end rule
        const MAX_MB = 100;
        if (selectedFile.size > MAX_MB * 1024 * 1024) {
            showError('This free web version supports ZIP files up to 100MB.');
            return;
        }

        showSection('processing');
        updateProgress(10, 'Uploading...');

        const formData = new FormData();
        formData.append('file', selectedFile);
        formData.append('use_mtime_fallback', useMtimeFallback.checked ? 'true' : 'false');
        formData.append('skip_no_metadata', skipNoMetadata.checked ? 'true' : 'false');
        formData.append('remove_duplicates', removeDuplicates.checked ? 'true' : 'false');

        const xhr = new XMLHttpRequest();

        xhr.upload.addEventListener('progress', (e) => {
            if (e.lengthComputable) {
                const pct = Math.round((e.loaded / e.total) * 30);
                updateProgress(pct, 'Uploading...');
            }
        });

        xhr.addEventListener('load', () => {
            if (xhr.status === 200) {
                updateStep(1, true);
                updateProgress(40, 'Extracting...');

                setTimeout(() => {
                    updateStep(2, true);
                    updateProgress(60, 'Fixing metadata...');
                }, 400);

                setTimeout(() => {
                    updateStep(3, true);
                    updateProgress(80, 'Organizing...');
                }, 900);

                setTimeout(() => {
                    updateStep(4, true);
                    updateProgress(95, 'Packaging...');
                }, 1400);

                setTimeout(() => {
                    updateStep(5, true);
                    updateProgress(100, 'Complete!');

                    const exportType = xhr.getResponseHeader('X-Export-Type');
                    const totalFiles = xhr.getResponseHeader('X-Total-Files');
                    const fixedFiles = xhr.getResponseHeader('X-Fixed-Files');
                    const restoredFiles = xhr.getResponseHeader('X-Restored-Files');
                    const renamedFiles = xhr.getResponseHeader('X-Renamed-Files');
                    const skippedFiles = xhr.getResponseHeader('X-Skipped-Files');
                    const duplicatesRemoved = xhr.getResponseHeader('X-Duplicates-Removed');

                    downloadBlob = xhr.response;

                    showSummary(
                        exportType,
                        totalFiles,
                        fixedFiles,
                        restoredFiles,
                        renamedFiles,
                        skippedFiles,
                        duplicatesRemoved
                    );
                }, 1900);

            } else {
                try {
                    const err = JSON.parse(xhr.responseText);
                    showError(err.error || 'Processing failed');
                } catch {
                    showError('Processing failed');
                }
            }
        });

        xhr.addEventListener('error', () => showError('Network error occurred'));

        xhr.open('POST', '/upload');
        xhr.responseType = 'blob';
        xhr.send(formData);
    });


    // =======================
    // PROGRESS + STEPS
    // =======================
    function updateProgress(percent, text) {
        document.getElementById('progressBar').style.width = percent + '%';
        document.getElementById('progressPercent').textContent = percent + '%';
        document.getElementById('statusText').textContent = text;
    }

    function updateStep(step, active) {
        const el = document.getElementById('step' + step);
        if (active && el) {
            el.style.backgroundColor = '#8c7bff';
            el.style.color = '#fff';
            el.style.borderColor = '#8c7bff';
        }
    }


    // =======================
    // SUMMARY SCREEN
    // =======================
    function showSummary(exportType, total, fixed, restored, renamed, skipped, duplicatesRemoved) {
        showSection('summary');

        const exportTypeEl = document.getElementById('exportType');
        exportTypeEl.textContent =
            exportType === 'google_takeout' ? 'Google Photos Download'
          : exportType === 'apple_photos' ? 'Apple Photos Export (Unmodified Originals)'
          : exportType || 'Unknown export';

        document.getElementById('totalFiles').textContent = total || '0';
        document.getElementById('fixedFiles').textContent = fixed || '0';
        document.getElementById('restoredFiles').textContent = restored || '0';
        document.getElementById('renamedFiles').textContent = renamed || '0';
        document.getElementById('skippedFiles').textContent = skipped || '0';
        document.getElementById('duplicatesRemoved').textContent = duplicatesRemoved || '0';

        const dupCount = parseInt(duplicatesRemoved || "0", 10);

        if (dupCount > 0) {
            duplicateSummaryContainer.style.display = 'block';
            duplicateCountLabel.textContent = dupCount.toString();

            duplicateListEl.textContent =
                "A full report is included inside your ZIP (duplicates_report.txt).";

            if (duplicateNote) {
                duplicateNote.textContent =
                    "Duplicates were removed safely using exact matching. The preferred version was kept.";
            }
        } else {
            duplicateSummaryContainer.style.display = 'none';
        }
    }


    // =======================
    // ERROR SCREEN
    // =======================
    function showError(msg) {
        document.getElementById('errorMessage').textContent = msg || 'Unknown error';
        showSection('error');
    }


    // =======================
    // DOWNLOAD ZIP
    // =======================
    document.getElementById('downloadBtn').addEventListener('click', () => {
        if (downloadBlob) {
            const url = URL.createObjectURL(downloadBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fixed_photos.zip';
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
        }
    });


    // =======================
    // RESET
    // =======================
    function resetForm() {
        selectedFile = null;
        downloadBlob = null;

        fileInput.value = '';
        fileInfo.style.display = 'none';

        updateProgress(0, 'Uploading...');
        for (let i = 1; i <= 5; i++) {
            const el = document.getElementById('step' + i);
            if (el) {
                el.style.backgroundColor = '';
                el.style.color = '';
                el.style.borderColor = '#d3d3ea';
            }
        }

        showSection('upload');
    }

    resetBtn.addEventListener('click', resetForm);
    errorResetBtn.addEventListener('click', resetForm);


    // =======================
    // HERO ROTATOR
    // =======================
    const phrases = [
        "Restore real photo dates from Google, Apple, WhatsApp, OneDrive and more.",
        "Make your chaotic photo library finally make sense again.",
        "Undo years of broken timestamps across clouds, phones, and apps.",
        "Clean, correct dates for every photo you‚Äôve ever backed up or downloaded.",
        "Fix Google, Apple, WhatsApp, OneDrive and old scans ‚Äî all in one click.",
        "Bring order to years of mixed Android + iPhone timelines in seconds.",
        "Fix photos spread across multiple Google accounts, exports, and old device backups.",
        "Repair every bad timestamp created by Takeout exports, app downloads, or file transfers.",
        "Make decades of photos appear in the right order ‚Äî everywhere.",
        "Turn messy folders into a clean, reliable photo history."
    ];

    let idx = 0;
    const heroEl = document.getElementById("hero-phrase");
    const dotsContainer = document.getElementById("hero-dots");

    function renderDots() {
        dotsContainer.innerHTML = "";
        phrases.forEach((_, i) => {
            const dot = document.createElement("div");
            dot.className = "hero-dot" + (i === idx ? " active" : "");
            dotsContainer.appendChild(dot);
        });
    }

    function showPhrase() {
        heroEl.style.opacity = 0;
        setTimeout(() => {
            heroEl.textContent = phrases[idx];
            heroEl.style.opacity = 1;
            renderDots();
        }, 800);
    }

    setInterval(() => {
        idx = (idx + 1) % phrases.length;
        showPhrase();
    }, 20000);

    showPhrase();


    // =======================
    // PRICING ‚Äì Add ZIP-only note
    // =======================
    document.querySelector(".pricing-free .pricing-features")
        .insertAdjacentHTML(
            "beforeend",
            "<li><strong>ZIP files only (up to 100MB)</strong></li>"
        );
    </script>

</main>

<!-- ========================= -->
<!-- Site Footer               -->
<!-- ========================= -->
<footer class="site-footer">
    <div class="footer-inner">
        <p>&copy; 2025 Photo Date Rescue. All rights reserved.</p>
        <nav class="footer-nav">
            <a href="https://photodaterescue.com">Homepage</a>
            <span>&middot;</span>
            <a href="https://photodaterescue.com/#how-it-works">How it works</a>
            <span>&middot;</span>
            <a href="https://photodaterescue.com/#pricing">Pricing</a>
            <span>&middot;</span>
            <a href="https://photodaterescue.com/#guides">Guides</a>
            <span>&middot;</span>
            <a href="https://photodaterescue.com/#faq">FAQ</a>
            <span>&middot;</span>
            <a href="https://photodaterescue.com/#partners">Affiliates</a>
        </nav>
    </div>
</footer>

</body>
</html>
